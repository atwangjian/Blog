
<!DOCTYPE HTML>
<html lang="zh-CN">

<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="wangjian - 爱编程，爱折腾">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="http://atwangjian.cn">
    <!--SEO-->

<meta name="keywords" content="java8" />


<meta name="description" content="写在前面：为啥要学Java8？我不管java8有多牛逼，只要是项目用了jdk1.8，就会有程序员用java8的语法写代码，所有我的理由很简单：为了看懂别人写的代码。
一.一头扎进Stream1...." />


<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->

<title>
    
    一头扎进强大的Stream Api |
    
    wangjian - 爱编程，爱折腾
</title>


<link rel="icon" href="/favicon.ico">

    


<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7.css">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.7.0.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash.css">

    
<div class="hide">
    <script type="text/javascript">
    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
    </script>
</div>




    

<meta name="generator" content="Hexo 4.2.0"></head>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
    <header class="main-header"  style="background-image:url(
    http://snippet.shenliyang.com/img/banner.jpg)"
     >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='wangjian'>
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
            <h2>
                Java开发|Crud小能手
            </h2>
            
        </div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://atwangjian.cn">
                        wangjian - 爱编程，爱折腾</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa "></i>
                                主页</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/about/"><i class="fa "></i>
                                关于</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/liuyanban.html"><i class="fa "></i>
                                留言板</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/archives/"><i class="fa "></i>
                                时间轴</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/build/"><i class="fa "></i>
                                建站日志</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/bookmark/"><i class="fa "></i>
                                书签</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/tools.html"><i class="fa "></i>
                                工具类</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/others.html"><i class="fa "></i>
                                代做Java系统</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="一头扎进强大的Stream Api">
            
            一头扎进强大的Stream Api
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/categories/java8/">java8</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a class="tag-link" href="/tags/java8/" rel="tag">java8</a>
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2020/04/18</span>
    </span>
    
    
</div>
        
        
    </div>
    
    <div class="post-body post-content">
        <p>写在前面：为啥要学Java8？我不管java8有多牛逼，只要是项目用了jdk1.8，就会有程序员用java8的语法写代码，所有我的理由很简单：为了看懂别人写的代码。</p>
<h1 id="一-一头扎进Stream"><a href="#一-一头扎进Stream" class="headerlink" title="一.一头扎进Stream"></a>一.一头扎进Stream</h1><h2 id="1-1-啥是Stream"><a href="#1-1-啥是Stream" class="headerlink" title="1.1 啥是Stream"></a>1.1 啥是Stream</h2><p>1.Stream API ( java.util.stream) 把真正的函数式编程风格引入到是目前为止对Java类库最好的补充，因为Stream API可以极大序员的生产力，让程序员写出高效率、干净、简洁的代码。<br>2.Stream 是 Java8 中处理集合的关键抽象概念，它可以指定你希望对集合进<br>行的操作，可以执行非常复杂的查找、过滤和映射数据等操作。 使用Stream API 对集合数据进行操作类似于使用 SQL 执行的数据库查询。也可以使用 Stream API 来并行执行操作。简言之，Stream API 提供了一种高效且易于使用的处理数据的方式。</p>
<h2 id="1-2-特点"><a href="#1-2-特点" class="headerlink" title="1.2 特点"></a>1.2 特点</h2><p>1.Stream 和 Collection 集合的区别：Collection 是一种静态的内存数据<br>结构，而 Stream 是有关计算的。前者是主要面向内存，存储在内存中，<br>后者主要是面向 CPU，通过 CPU 实现计算<br>2.Stream关注的是对数据的运算，与CPU打交道,集合关注的是对数据的存储，与内存打交道<br>3.（1）Stream 自己不会存储元素<br>   （2）Stream 不会改变源对象。相反，他们会返回一个持有结果的新Stream<br>   （3）Stream 操作是延迟执行的。这意味着他们会等到需要结果的时候才执行<br>4.<strong>Stream执行流程</strong>:<br>(1)Stream的实例化<br>(2)一系列的中间操作（过滤，映射……）<br>(3)终止操作    </p>
<h1 id="二-Stream操作三步骤"><a href="#二-Stream操作三步骤" class="headerlink" title="二.Stream操作三步骤"></a>二.Stream操作三步骤</h1><h2 id="2-1-创建-Stream的方式"><a href="#2-1-创建-Stream的方式" class="headerlink" title="2.1 创建 Stream的方式"></a>2.1 创建 Stream的方式</h2><p>（1）通过集合<br>Java8 中的 Collection 接口被扩展，提供了两个获取流的方法：<br>●default Stream<E> stream() : 返回一个顺序流<br>●default Stream<E> parallelStream() : 返回一个并行流 </p>
<hr>
<p>（2）通过数组<br>Java8 中的 Arrays 的静态方法 stream() 可以获取数组流：<br>●static <T> Stream<T> stream(T[] array): 返回一个流<br>重载形式，能够处理对应基本类型的数组：<br>●public static IntStream stream(int[] array)<br>●public static LongStream stream(long[] array)<br>●public static DoubleStream stream(double[] array) </p>
<hr>
<p>（3）通过Stream的of()<br> 可以调用Stream类静态方法 of(), 通过显示值创建一流。它可以接收任意数量的参数。<br>●public static<T> Stream<T> of(T… values) : 返回一个流   </p>
<hr>
<p>（4）创建无限流<br>可以使用静态方法 Stream.iterate() 和 Stream.generate(), 创建无限流。<br>●迭代public static<T> Stream<T> iterate(final T seed, final UnaryOperator<T> f)<br>●生成public static<T> Stream<T> generate(Supplier<T> s) </p>
<h2 id="2-2-中间操作"><a href="#2-2-中间操作" class="headerlink" title="2.2 中间操作"></a>2.2 中间操作</h2><p>多个中间操作可以连接起来形成一个流水线，除非流水线上触发终止操作，否则中间操作不会执行任何的处理！而在终止操作时一次性全部处理，称为“惰性求值”。<br>(1)筛选与切片   </p>
<table border="1">
<tr>
    <th width="35%">方法</th>
    <th>描述</th>
</tr>
<tr>
      <td>filter(Predicate p)</td>
      <td>接收 Lambda ， 从流中排除某些元素</td>
</tr>
<tr>
      <td>distinct()</td>
      <td>筛选，通过流所生成元素的 hashCode() 和 equals() 去除重复元素</td>
</tr>
<tr>
      <td>limit(long maxSize)</td>
      <td>截断流，使其元素不超过给定数量</td>
</tr>
<tr>
      <td>skip(long n)</td>
      <td>跳过元素，返回一个扔掉了前 n 个元素的流。若流中元素不足 n 个，则返回一个空流。与 limit(n) 互补</td>
</tr>
</table>

<p>（2）映射</p>
<table border="1">
<tr>
    <th width="35%">方法</th>
    <th>描述</th>
</tr>
<tr>
      <td>map(Function f)</td>
      <td>接收一个函数作为参数，该函数会被应用到每个元素上，并将其映射成一个新的元素。</td>
</tr>
<tr>
      <td>mapToDouble(ToDoubleFunction f)</td>
      <td>接收一个函数作为参数，该函数会被应用到每个元素上，产生一个新的 DoubleStream。</td>
</tr>
<tr>
      <td>mapToInt(ToIntFunction f)</td>
      <td>接收一个函数作为参数，该函数会被应用到每个元素上，产生一个新的 IntStream。</td>
</tr>
<tr>
      <td>mapToLong(ToLongFunction f)</td>
      <td>接收一个函数作为参数，该函数会被应用到每个元素上，产生一个新的 LongStream。</td>
</tr>
<tr>
      <td>flatMap(Function f)</td>
      <td>接收一个函数作为参数，将流中的每个值都换成另一个流，然后把所有流连接成一个流</td>
</tr>
</table>

<p>（3）排序   </p>
<table border="1">
<tr>
    <th width="35%">方法</th>
    <th>描述</th>
</tr>
<tr>
      <td>sorted()</td>
      <td>产生一个新流，其中按自然顺序排序</td>
</tr>
<tr>
      <td>sorted(Comparator com)</td>
      <td>产生一个新流，其中按比较器顺序</td>
</tr>
</table>

<h2 id="2-3-终止操作"><a href="#2-3-终止操作" class="headerlink" title="2.3 终止操作"></a>2.3 终止操作</h2><p>●终端操作会从流的流水线生成结果。其结果可以是任何不是流的值，例<br>如：List、Integer，甚至是 void 。<br>●流进行了终止操作后，不能再次使用。<br>（1）匹配与查找   </p>
<table border="1">
<tr>
    <th width="35%">方法</th>
    <th>描述</th>
</tr>
<tr>
      <td>allMatch(Predicate p)</td>
      <td>检查是否匹配所有元素</td>
</tr>
<tr>
      <td>anyMatch(Predicate p) </td>
      <td>检查是否至少匹配一个元素</td>
</tr>
<tr>
      <td>noneMatch(Predicate p)</td>
      <td>检查是否没有匹配所有元素</td>
</tr>
<tr>
      <td>findFirst()</td>
      <td>返回第一个元素</td>
</tr>
<tr>
      <td>findAny()</td>
      <td>返回当前流中的任意</td>
</tr>
<tr>
      <td>count()</td>
      <td>返回流中元素总数</td>
</tr>
<tr>
      <td>max(Comparator c)</td>
      <td>返回流中最大值</td>
</tr>
<tr>
      <td>min(Comparator c)</td>
      <td> 返回流中最小值</td>
</tr>
<tr>
      <td>forEach(Consumer c)/td>
      <td>内部迭代</td>
</tr>
</table>  

<p>（2）归约</p>
<table border="1">
<tr>
    <th width="35%">方法</th>
    <th>描述</th>
</tr>
<tr>
      <td>reduce(T iden, BinaryOperator b)</td>
      <td>可以将流中元素反复结合起来，得到一个值。返回 T</td>
</tr>
<tr>
      <td>reduce(BinaryOperator b)</td>
      <td>可以将流中元素反复结合起来，得到一个值。返回 Optional<T></td>
</tr>
</table>     

<p><strong>备注</strong>：map 和 reduce 的连接通常称为 map-reduce 模式，因 Google<br>用它来进行网络搜索而出名。   </p>
<p>（3）收集   </p>
<table border="1">
<tr>
    <th width="35%">方法</th>
    <th>描述</th>
</tr>
<tr>
      <td>collect(Collector c)</td>
      <td>将流转换为其他形式。接收一个 Collector接口的实现，用于给Stream中元素做汇总的方法</td>
</tr>
</table> 
Collector 接口中方法的实现决定了如何对流执行收集的操作(如收集到 List、Set、Map)。   
另外， Collectors 实用类提供了很多静态方法，可以方便地创建常见收集器实例。 

<h1 id="三-代码"><a href="#三-代码" class="headerlink" title="三.代码"></a>三.代码</h1><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">package main.java8;</span><br><span class="line"></span><br><span class="line">import main.entity.User;</span><br><span class="line">import org.junit.Test;</span><br><span class="line"></span><br><span class="line">import javax.sound.midi.Soundbank;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Arrays;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Optional;</span><br><span class="line">import java.util.Set;</span><br><span class="line">import java.util.stream.Collectors;</span><br><span class="line">import java.util.stream.IntStream;</span><br><span class="line">import java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* @author wangjian</span></span><br><span class="line"><span class="comment">* @date 2020/4/15 21:40</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">public <span class="keyword">class</span> StreamTest &#123;</span><br><span class="line"></span><br><span class="line">   @Test</span><br><span class="line">   public void test1<span class="literal">()</span> &#123;</span><br><span class="line">       <span class="comment">// 1.通过集合</span></span><br><span class="line">       List&lt;User&gt; <span class="built_in">list</span> = <span class="module-access"><span class="module"><span class="identifier">User</span>.</span></span>get<span class="constructor">UserList()</span>;</span><br><span class="line">       <span class="comment">// 1.1 顺序流</span></span><br><span class="line">       Stream&lt;User&gt; stream = <span class="built_in">list</span>.stream<span class="literal">()</span>;</span><br><span class="line">       <span class="comment">// 1.2 并行流</span></span><br><span class="line">       Stream&lt;User&gt; userStream = <span class="built_in">list</span>.parallel<span class="constructor">Stream()</span>;</span><br><span class="line">       <span class="comment">// 2. 通过数组</span></span><br><span class="line">       <span class="built_in">int</span><span class="literal">[]</span> ints = <span class="keyword">new</span> <span class="built_in">int</span><span class="literal">[]</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">       IntStream intStream = <span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span>stream(ints);</span><br><span class="line">       User u1 = <span class="keyword">new</span> <span class="constructor">User(11, <span class="string">"firse"</span>, <span class="string">"123465"</span>)</span>;</span><br><span class="line">       User u2 = <span class="keyword">new</span> <span class="constructor">User(12, <span class="string">"secong"</span>, <span class="string">"sdfasdf"</span>)</span>;</span><br><span class="line">       User<span class="literal">[]</span> users = <span class="keyword">new</span> User<span class="literal">[]</span>&#123;u1, u2&#125;;</span><br><span class="line">       Stream&lt;User&gt; userStream1 = <span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span>stream(users);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 3. 通过Stream的of()</span></span><br><span class="line">       Stream&lt;Integer&gt; integerStream = <span class="module-access"><span class="module"><span class="identifier">Stream</span>.</span></span><span class="keyword">of</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 4. 创建无限流</span></span><br><span class="line">       <span class="comment">// 4.1 迭代</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">Stream</span>.</span></span>iterate(<span class="number">0</span>, t -&gt; t + <span class="number">2</span>).limit(<span class="number">10</span>).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line">       <span class="comment">// 4.2 生成</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">Stream</span>.</span></span>generate(Math::random).limit(<span class="number">10</span>).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 中间操作</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   @Test</span><br><span class="line">   public void test2<span class="literal">()</span> &#123;</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"========1.筛选与切片============"</span>);</span><br><span class="line">       <span class="comment">// 1.筛选与切片</span></span><br><span class="line">       List&lt;User&gt; <span class="built_in">list</span> = <span class="module-access"><span class="module"><span class="identifier">User</span>.</span></span>get<span class="constructor">UserList()</span>;</span><br><span class="line">       <span class="comment">// 1.1 filter(Predicate p)，接收Lambda，从流中排除某些元素。查询id大于5的数据</span></span><br><span class="line">       <span class="built_in">list</span>.stream<span class="literal">()</span>.filter(e -&gt; e.get<span class="constructor">Id()</span> &gt; <span class="number">5</span>).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println<span class="literal">()</span>;</span><br><span class="line">       <span class="comment">// 1.2 limit(n)，截断流，使其元素不超过给定数量</span></span><br><span class="line">       <span class="built_in">list</span>.stream<span class="literal">()</span>.limit(<span class="number">5</span>).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println<span class="literal">()</span>;</span><br><span class="line">       <span class="comment">// 1.3 skip(n)，跳过元素，返回一个扔掉了前n个元素的流。若流中元素不足n个，则返回一个空流。</span></span><br><span class="line">       <span class="built_in">list</span>.stream<span class="literal">()</span>.skip(<span class="number">5</span>).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println<span class="literal">()</span>;</span><br><span class="line">       <span class="comment">// 1.4 distinct()，去重（通过流所生成元素的hashCode()和equals()去除重复元素）</span></span><br><span class="line">       List list1 = <span class="keyword">new</span> <span class="constructor">ArrayList()</span>;</span><br><span class="line">       list1.add(<span class="string">"1"</span>);</span><br><span class="line">       list1.add(<span class="string">"2"</span>);</span><br><span class="line">       list1.add(<span class="string">"3"</span>);</span><br><span class="line">       list1.add(<span class="string">"1"</span>);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"当前list1:"</span> + list1);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println<span class="literal">()</span>;</span><br><span class="line">       list1.stream<span class="literal">()</span>.distinct<span class="literal">()</span>.for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 2.映射</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"===========2.map映射============"</span>);</span><br><span class="line">       <span class="built_in">list</span>.add(<span class="keyword">new</span> <span class="constructor">User(15, <span class="string">"张三丰"</span>, <span class="string">"123456789"</span>)</span>);</span><br><span class="line">       <span class="comment">// 获取用户名长度大于3的用户名的姓名</span></span><br><span class="line">       <span class="built_in">list</span>.stream<span class="literal">()</span>.map(e -&gt; e.get<span class="constructor">UserName()</span>).filter(userName -&gt; userName.length<span class="literal">()</span> &gt; <span class="number">2</span>).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line"></span><br><span class="line">       List&lt;String&gt; list2 = <span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">as</span><span class="constructor">List(<span class="string">"aa"</span>, <span class="string">"bb"</span>, <span class="string">"cc"</span>, <span class="string">"dd"</span>)</span>;</span><br><span class="line">       list2.stream<span class="literal">()</span>.map(e -&gt; e.<span class="keyword">to</span><span class="constructor">UpperCase()</span>).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 3.排序</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"===========3.排序============"</span>);</span><br><span class="line">       List&lt;Integer&gt; list3 = <span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">as</span><span class="constructor">List(1, 2, 4, 63, 0, -5, 23, 1231)</span>;</span><br><span class="line">       list3.stream<span class="literal">()</span>.sorted<span class="literal">()</span>.for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line">       <span class="built_in">list</span>.stream<span class="literal">()</span>.sorted((e1, e2) -&gt; <span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>compare(e1.get<span class="constructor">Id()</span>, e2.get<span class="constructor">Id()</span>)).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"排序多判断条件："</span>);</span><br><span class="line">       <span class="built_in">list</span>.add(<span class="keyword">new</span> <span class="constructor">User(15, <span class="string">"李四"</span>, <span class="string">"123123"</span>)</span>);</span><br><span class="line">       <span class="built_in">list</span>.stream<span class="literal">()</span>.sorted((e1, e2) -&gt; &#123;</span><br><span class="line">           <span class="built_in">int</span> idValue = <span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>compare(e1.get<span class="constructor">Id()</span>, e2.get<span class="constructor">Id()</span>);</span><br><span class="line">           <span class="keyword">if</span> (idValue != <span class="number">0</span>) &#123;</span><br><span class="line">               return idValue;</span><br><span class="line">           &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">               return -<span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>compare(e1.get<span class="constructor">Id()</span>, e2.get<span class="constructor">Id()</span>);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;).for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   @Test</span><br><span class="line">   public void test3<span class="literal">()</span> &#123;</span><br><span class="line">       <span class="comment">// 1.匹配与查找</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"==============匹配与查找============="</span>);</span><br><span class="line">       <span class="comment">// 1.1 allMatch(Predicate p) 检查是否匹配所有元素：是否所有的id都大于15</span></span><br><span class="line">       List&lt;User&gt; <span class="built_in">list</span> = <span class="module-access"><span class="module"><span class="identifier">User</span>.</span></span>get<span class="constructor">UserList()</span>;</span><br><span class="line">       boolean allMatch = <span class="built_in">list</span>.stream<span class="literal">()</span>.all<span class="constructor">Match(<span class="params">e</span> -&gt; <span class="params">e</span>.<span class="params">getId</span>()</span> &gt; <span class="number">10</span>);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(allMatch);</span><br><span class="line">       <span class="comment">// 1.2 anyMatch(Predicate p) 检查是否至少匹配一个元素</span></span><br><span class="line">       boolean anyMatch = <span class="built_in">list</span>.stream<span class="literal">()</span>.any<span class="constructor">Match(<span class="params">e</span> -&gt; <span class="params">e</span>.<span class="params">getId</span>()</span><span class="operator"> == </span><span class="number">11</span>);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(anyMatch);</span><br><span class="line">       <span class="comment">// 1.3 noneMatch(Predicate p) 检查是否没有匹配所有元素</span></span><br><span class="line">       boolean noneMatch = <span class="built_in">list</span>.stream<span class="literal">()</span>.none<span class="constructor">Match(<span class="params">e</span> -&gt; <span class="params">e</span>.<span class="params">getId</span>()</span> &gt; <span class="number">12</span>);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(noneMatch);</span><br><span class="line">       <span class="comment">// 1.4 findFirst() 返回第一个元素</span></span><br><span class="line">       Optional&lt;String&gt; first = <span class="built_in">list</span>.stream<span class="literal">()</span>.map(e -&gt; e.get<span class="constructor">UserName()</span>).find<span class="constructor">First()</span>;</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(first);</span><br><span class="line">       <span class="comment">// 1.5 findAny() 返回当前流中的任意元素</span></span><br><span class="line">       Optional&lt;String&gt; any = <span class="built_in">list</span>.parallel<span class="constructor">Stream()</span>.map(e -&gt; e.get<span class="constructor">UserName()</span>).find<span class="constructor">Any()</span>;</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(any);</span><br><span class="line">       <span class="comment">//  1.6 count() 返回流中元素总数</span></span><br><span class="line">       long count = <span class="built_in">list</span>.stream<span class="literal">()</span>.count<span class="literal">()</span>;</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(count);</span><br><span class="line">       <span class="comment">//  1.7 max(Comparator c) 返回流中最大值</span></span><br><span class="line">       Optional&lt;Integer&gt; max = <span class="built_in">list</span>.stream<span class="literal">()</span>.map(e -&gt; e.get<span class="constructor">Id()</span>).max(Integer::compare);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(max);</span><br><span class="line">       <span class="comment">//  1.8 min(Comparator c) 返回流中最小值</span></span><br><span class="line">       Optional&lt;Integer&gt; min = <span class="built_in">list</span>.stream<span class="literal">()</span>.map(e -&gt; e.get<span class="constructor">Id()</span>).min(Integer::compare);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(min);</span><br><span class="line">       <span class="comment">//  1.9 forEach(Consumer c),内部迭代(使用 Collection 接口需要用户去做迭代，称为外部迭代)</span></span><br><span class="line">       <span class="built_in">list</span>.stream<span class="literal">()</span>.for<span class="constructor">Each(System.<span class="params">out</span>::<span class="params">println</span>)</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 2. 归约</span></span><br><span class="line">       <span class="comment">// 2.1 reduce(T iden, BinaryOperator b) 可以将流中元素反复结合起来，得到一个值。返回 T</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"==============归约============="</span>);</span><br><span class="line">       <span class="comment">// 计算1-10的自然数的和</span></span><br><span class="line">       List&lt;Integer&gt; list1 = <span class="module-access"><span class="module"><span class="identifier">Arrays</span>.</span></span><span class="keyword">as</span><span class="constructor">List(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</span>;</span><br><span class="line">       Integer sum = list1.stream<span class="literal">()</span>.reduce(<span class="number">0</span>, Integer::sum);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(sum);</span><br><span class="line">       <span class="comment">// reduce(BinaryOperator b) 可以将流中元素反复结合起来，得到一个值。返回 Optional&lt;T&gt;</span></span><br><span class="line">       <span class="comment">// 计算所有id的和</span></span><br><span class="line">       Optional&lt;Integer&gt; idSum = <span class="built_in">list</span>.stream<span class="literal">()</span>.map(e -&gt; e.get<span class="constructor">Id()</span>).reduce(Integer::sum);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(idSum);</span><br><span class="line">       Optional&lt;Integer&gt; idSum2 = <span class="built_in">list</span>.stream<span class="literal">()</span>.map(e -&gt; e.get<span class="constructor">Id()</span>).reduce((d1, d2) -&gt; d1 + d2);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(idSum2);</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 3.收集</span></span><br><span class="line">       <span class="comment">// collect(Collector c) 将流转换为其他形式。接收一个 Collector接口的实现，用于给Stream中元素做汇总的方法</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"============收集==========="</span>);</span><br><span class="line">       List&lt;User&gt; idList = <span class="built_in">list</span>.stream<span class="literal">()</span>.filter(e -&gt; e.get<span class="constructor">Id()</span> &gt; <span class="number">5</span>).collect(<span class="module-access"><span class="module"><span class="identifier">Collectors</span>.</span></span><span class="keyword">to</span><span class="constructor">List()</span>);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(idList);</span><br><span class="line">       Set&lt;User&gt; idSet = <span class="built_in">list</span>.stream<span class="literal">()</span>.filter(e -&gt; e.get<span class="constructor">Id()</span> &gt; <span class="number">5</span>).collect(<span class="module-access"><span class="module"><span class="identifier">Collectors</span>.</span></span><span class="keyword">to</span><span class="constructor">Set()</span>);</span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(idSet);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  
    </div>
    
    <div class="reward" ontouchstart>
    <div class="reward-wrap">赏
        <div class="reward-box">
            
            <span class="reward-type">
                <img class="alipay" src="/img/zhifubao.png"><b>支付宝打赏</b>
            </span>
            
            
            <span class="reward-type">
                <img class="wechat" src="/img/weixin.png"><b>微信打赏</b>
            </span>
            
        </div>
    </div>
    <p class="reward-tip">
        赞赏是不耍流氓的鼓励
    </p>
</div>
    
    <div class="post-footer">
        <div>
            
            转载声明：
            商业转载请联系作者获得授权,非商业转载请注明出处<a href="http://atwangjian.cn" target="_blank">http://atwangjian.cn</a>
            
            
        </div>     
        <div>
            
        </div>
        <p>
        <div>
        	<div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/others.html" class="pre-post btn btn-default" title='Java系统定制'>
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
        <span class="hidden-xs">
            Java系统定制</span>
    </a>
    
    
    <a href="/spring/1.html" class="next-post btn btn-default" title='Spring事务'>
        <span class="hidden-lg">下一篇</span>
        <span class="hidden-xs">
            Spring事务</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

<div id="comments">
    

<div id="vcomments" class="valine"></div>

<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

<script>
new Valine({
    av: AV,
    el: '#vcomments',
    appId: '4GVjAHT57wrVSFgcukAADkSP-gzGzoHsz',
    appKey: 'yNilC5ml46aQXsF4KI8SEQby',
    placeholder: '说点什么吧！',
    notify: true,
    verify: true,
    avatar: 'wavatar',
    meta: 'nick,mail'.split(','),
    pageSize: '10',
    path: window.location.pathname,
    lang: 'zh-CN'.toLowerCase()
})
</script>


</div>

                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">
            文章目录
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一-一头扎进Stream"><span class="toc-text">一.一头扎进Stream</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-啥是Stream"><span class="toc-text">1.1 啥是Stream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-特点"><span class="toc-text">1.2 特点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二-Stream操作三步骤"><span class="toc-text">二.Stream操作三步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-创建-Stream的方式"><span class="toc-text">2.1 创建 Stream的方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-中间操作"><span class="toc-text">2.2 中间操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-终止操作"><span class="toc-text">2.3 终止操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三-代码"><span class="toc-text">三.代码</span></a></li></ol>
        
    </div>
</aside>
                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>
<a id="back-to-top" class="icon-btn hide">
    <i class="fa fa-chevron-up"></i>
</a>
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>
            </div>
            <div class="col-sm-12">
                <span>Copyright &copy;
                    2020
                    
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">wangjian</a>
                </span>             
            </div>
        </div>
    </div>
</div>




<script src="/js/app.js?rev=@@hash.js"></script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"right","width":150,"height":280},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/love.js"></script>
<!-- 代码块复制功能 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js"></script>
<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/javascript" src="/js/clipboard_use.js"></script>

<link rel="stylesheet" href="/dist/APlayer.min.css">
<div id="aplayer"></div>
<script type="text/javascript" src="/dist/APlayer.min.js"></script>
<script type="text/javascript" src="/dist/music.js"></script>


</html>